CREATE DATABASE YetiCave
DEFAULT CHARACTER SET utf8
DEFAULT COLLATE utf8_general_ci;

USE YetiCave;

CREATE TABLE categories (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(64) NOT NULL,
  symbolic_code VARCHAR(128) NOT NULL UNIQUE
);

CREATE TABLE lots (
  id INT AUTO_INCREMENT PRIMARY KEY,
  date_add TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  name VARCHAR(64) NOT NULL,
  description TEXT,
  image_url VARCHAR(64) NOT NULL,
  start_price DECIMAL NOT NULL,
  date_close TIMESTAMP NOT NULL,
  bet_step INT NOT NULL,
  user_id_add INT,
  user_id_win INT,
  categories_id INT
);

CREATE TABLE bets (
  id INT AUTO_INCREMENT PRIMARY KEY,
  bet_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  bet_amount DECIMAL NOT NULL,
  user_id INT,
  lot_id INT
);

CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  date_add TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  email VARCHAR(128) NOT NULL UNIQUE,
  name VARCHAR(128) NOT NULL,
  password VARCHAR(128) NOT NULL,
  contact TEXT NOT NULL,
  lot_id INT,
  bet_id INT
);
